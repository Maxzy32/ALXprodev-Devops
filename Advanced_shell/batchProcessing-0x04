#!/usr/bin/env bash
# batchProcessing-0x04
# Fetch Pokémon data in parallel and handle background jobs

# List of Pokémon to fetch
pokemon_list=("pikachu" "bulbasaur" "charmander" "squirtle" "jigglypuff")

# Base API URL
base_url="https://pokeapi.co/api/v2/pokemon"

echo "Fetching Pokémon data in parallel..."

# Loop through Pokémon list
for pokemon in "${pokemon_list[@]}"; do
    {
        echo "Fetching $pokemon..."
        curl -s "$base_url/$pokemon" -o "${pokemon}.json"
        echo "$pokemon data saved to ${pokemon}.json"
    } &
done

# Display current jobs running in the background
jobs

# Wait for all background jobs to finish
wait

echo "✅ All Pokémon data fetched successfully!"
